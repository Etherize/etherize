webpackHotUpdate("static/development/pages/create.js",{

/***/ "./src/components/HeavenlyInterface.js":
/*!*********************************************!*\
  !*** ./src/components/HeavenlyInterface.js ***!
  \*********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return HeavenlyInterface; });
/* harmony import */ var _babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime-corejs2/core-js/json/stringify */ "./node_modules/@babel/runtime-corejs2/core-js/json/stringify.js");
/* harmony import */ var _babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/objectSpread */ "./node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread.js");
/* harmony import */ var _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime-corejs2/regenerator */ "./node_modules/@babel/runtime-corejs2/regenerator/index.js");
/* harmony import */ var _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/slicedToArray */ "./node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/asyncToGenerator */ "./node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/classCallCheck */ "./node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/createClass */ "./node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/possibleConstructorReturn */ "./node_modules/@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/getPrototypeOf */ "./node_modules/@babel/runtime-corejs2/helpers/esm/getPrototypeOf.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/assertThisInitialized */ "./node_modules/@babel/runtime-corejs2/helpers/esm/assertThisInitialized.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/inherits */ "./node_modules/@babel/runtime-corejs2/helpers/esm/inherits.js");
/* harmony import */ var _babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @babel/runtime-corejs2/helpers/esm/defineProperty */ "./node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_12__);
/* harmony import */ var openlaw__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! openlaw */ "./node_modules/openlaw/dist/esm/lib/index.js");
/* harmony import */ var openlaw_elements__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! openlaw-elements */ "./node_modules/openlaw-elements/dist/esm/index.js");
/* harmony import */ var mdbreact__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! mdbreact */ "./node_modules/mdbreact/dist/mdbreact.esm.js");
/* harmony import */ var openlaw_elements_dist_openlaw_elements_min_css__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! openlaw-elements/dist/openlaw-elements.min.css */ "./node_modules/openlaw-elements/dist/openlaw-elements.min.css");
/* harmony import */ var openlaw_elements_dist_openlaw_elements_min_css__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(openlaw_elements_dist_openlaw_elements_min_css__WEBPACK_IMPORTED_MODULE_16__);
/* harmony import */ var _HeavenlyInterface_css__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./HeavenlyInterface.css */ "./src/components/HeavenlyInterface.css");
/* harmony import */ var _HeavenlyInterface_css__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_HeavenlyInterface_css__WEBPACK_IMPORTED_MODULE_17__);
/* harmony import */ var _BannerHeader__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./BannerHeader */ "./src/components/BannerHeader.js");
/* harmony import */ var _API__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./API */ "./src/components/API.js");
/* harmony import */ var _Modal__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./Modal */ "./src/components/Modal.tsx");
/* harmony import */ var _LoadingPortal__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./LoadingPortal */ "./src/components/LoadingPortal.js");
/* harmony import */ var _Footer__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./Footer */ "./src/components/Footer.tsx");












var __jsx = react__WEBPACK_IMPORTED_MODULE_12___default.a.createElement;
 // import openlaw


 // import AgreementPreview from "../components/AgreementPreview";









var COST = "$400";
var EMAIL = "etherizehelp@gmail.com"; // configure openlaw
// You can change TEMPLATE_NAME to 'articles-of-organization' to make the code work ...
// Right now, both deal templates on Etherizeit instance are causing the same issue
// import getConfig from 'next/config'

var HeavenlyInterface =
/*#__PURE__*/
function (_React$Component) {
  Object(_babel_runtime_corejs2_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_10__["default"])(HeavenlyInterface, _React$Component);

  function HeavenlyInterface(props) {
    var _this;

    Object(_babel_runtime_corejs2_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_5__["default"])(this, HeavenlyInterface);

    _this = Object(_babel_runtime_corejs2_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_7__["default"])(this, Object(_babel_runtime_corejs2_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_8__["default"])(HeavenlyInterface).call(this, props));

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__["default"])(_this), "state", {
      // Variables for OpenLaw API
      openLawConfig: null,
      templateName: null,
      //Variables for the UI
      formVisible: true,
      reviewVisible: false,
      finalizeVisible: false,
      // State variables for OpenLaw
      apiClient: null,
      title: "",
      template: "",
      compiledTemplate: null,
      parameters: {},
      executionResult: null,
      variables: null,
      // State variables for preview component
      previewHTML: null,
      loading: false,
      ipfsLoading: false,
      success: false,
      progress: 0,
      progressMessage: ""
    });

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__["default"])(_this), "componentDidMount",
    /*#__PURE__*/
    Object(_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__["default"])(
    /*#__PURE__*/
    _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee() {
      var openLawConfig, apiClient, _ref2, _ref3, jwt, err, template, content, versions, title, compiledTemplate, parameters, _ref4, executionResult, errorMessage, variables;

      return _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              //create config
              openLawConfig = {
                server: "https://lib.openlaw.io/api/v1/etherizeit",
                templateName: _this.props.templateName // username: "SECRET",
                // password: "SECRET_TOO"

              }; // We get the JWT from out backend now instead of logging in via username+password
              // console.log( "api host location: " + process.env.API_HOST);

              apiClient = new openlaw__WEBPACK_IMPORTED_MODULE_13__["APIClient"]({
                root: openLawConfig.server // , auth:{
                // username:process.env.KaleidoUser,
                // password:process.env.KaleidoPass, }

              });
              _context.next = 4;
              return _API__WEBPACK_IMPORTED_MODULE_19__["default"].getJWT();

            case 4:
              _ref2 = _context.sent;
              _ref3 = Object(_babel_runtime_corejs2_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__["default"])(_ref2, 2);
              jwt = _ref3[0];
              err = _ref3[1];

              if (!(err !== "" || jwt === "")) {
                _context.next = 11;
                break;
              }

              alert(err);
              return _context.abrupt("return");

            case 11:
              apiClient.jwt = jwt;
              console.log("api jwt: " + apiClient.jwt); //Retrieve your OpenLaw template by name, use async/await
              //   console.log("openlaw instance hosted at: " + openLawConfig.server);

              _context.next = 15;
              return apiClient.getTemplate(openLawConfig.templateName);

            case 15:
              template = _context.sent;
              // console.log("template..", template);
              //Retreive the OpenLaw Template, including MarkDown
              content = template.content; // console.log("template..", template);
              // Get the most recent version of the OpenLaw API Tutorial Template

              _context.next = 19;
              return apiClient.getTemplateVersions(openLawConfig.templateName, 20, 1);

            case 19:
              versions = _context.sent;
              // console.log("versions..", versions[0], versions.length);
              title = template.title; //Get my compiled Template, for use in rendering the HTML in previewTemplate

              _context.next = 23;
              return openlaw__WEBPACK_IMPORTED_MODULE_13__["Openlaw"].compileTemplate(content);

            case 23:
              compiledTemplate = _context.sent;

              if (!compiledTemplate.isError) {
                _context.next = 26;
                break;
              }

              throw "template error: " + compiledTemplate.errorMessage;

            case 26:
              // console.log("my compiled template..", compiledTemplate);
              parameters = {
                "Organizer Signature": '{"email":"' + EMAIL + '"}'
              };
              _context.next = 29;
              return openlaw__WEBPACK_IMPORTED_MODULE_13__["Openlaw"].execute(compiledTemplate.compiledTemplate, {}, parameters);

            case 29:
              _ref4 = _context.sent;
              executionResult = _ref4.executionResult;
              errorMessage = _ref4.errorMessage;

              // console.log("execution result:", executionResult);
              // ** This is helpful for logging in development, or throwing exceptions at runtime.
              if (errorMessage) {
                console.error("Openlaw Execution Error:", errorMessage);
              }

              _context.next = 35;
              return openlaw__WEBPACK_IMPORTED_MODULE_13__["Openlaw"].getExecutedVariables(executionResult, {});

            case 35:
              variables = _context.sent;

              // console.log("variables:", variables);
              _this.setState({
                openLawConfig: openLawConfig,
                apiClient: apiClient,
                title: title,
                template: template,
                compiledTemplate: compiledTemplate,
                parameters: parameters,
                executionResult: executionResult,
                variables: variables
              });

            case 37:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    })));

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__["default"])(_this), "onChange", function (key, value) {
      var parameters = key ? Object(_babel_runtime_corejs2_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_1__["default"])({}, _this.state.parameters, Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__["default"])({}, key, [key].includes("Email") ? _babel_runtime_corejs2_core_js_json_stringify__WEBPACK_IMPORTED_MODULE_0___default()({
        email: value
      }) : value)) : _this.state.parameters;

      _this.setState({
        parameters: parameters
      }); // ***
      // Commented out below code and moved it to executeTemplate() as is slows the page down during form filling
      // ***
      // const { executionResult, errorMessage } = Openlaw.execute(
      //   compiledTemplate.compiledTemplate,
      //   {},
      //   parameters
      // );
      // const variables = Openlaw.getExecutedVariables(executionResult, {});
      //   this.setState({ parameters, variables, executionResult });

    });

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__["default"])(_this), "sendDraft",
    /*#__PURE__*/
    Object(_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__["default"])(
    /*#__PURE__*/
    _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee2() {
      var _this$state, openLawConfig, apiClient, progress, progressMessage, _ref6, _ref7, jwt, err, uploadParams, _this$uploadParamsHas, _this$uploadParamsHas2, validEmail, memberEmail, contractId;

      return _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              _this$state = _this.state, openLawConfig = _this$state.openLawConfig, apiClient = _this$state.apiClient, progress = _this$state.progress, progressMessage = _this$state.progressMessage;

              _this.MiscellaneousModal.current.SetTextAndTitle("Sending Draft", "");

              _this.MiscellaneousModal.current.ToggleShowing();

              _this.MiscellaneousModal.current.ToggleLoading(true);

              _context2.prev = 4;
              _context2.next = 7;
              return _API__WEBPACK_IMPORTED_MODULE_19__["default"].getJWT();

            case 7:
              _ref6 = _context2.sent;
              _ref7 = Object(_babel_runtime_corejs2_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__["default"])(_ref6, 2);
              jwt = _ref7[0];
              err = _ref7[1];

              if (!(err !== "" || jwt === "")) {
                _context2.next = 14;
                break;
              }

              alert(err);
              return _context2.abrupt("return");

            case 14:
              apiClient.jwt = jwt; //add Open Law params to be uploaded

              uploadParams = _this.buildOpenLawParamsFromState();
              _this$uploadParamsHas = _this.uploadParamsHasValidEmail(uploadParams), _this$uploadParamsHas2 = Object(_babel_runtime_corejs2_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__["default"])(_this$uploadParamsHas, 2), validEmail = _this$uploadParamsHas2[0], memberEmail = _this$uploadParamsHas2[1];

              if (validEmail) {
                _context2.next = 20;
                break;
              }

              _this.MiscellaneousModal.current.SetTextAndTitle("Error", "We couldn't parse your email address! Please enter a valid email address.");

              return _context2.abrupt("return");

            case 20:
              console.log(uploadParams.parameters);
              _context2.next = 23;
              return apiClient.uploadDraft(uploadParams);

            case 23:
              contractId = _context2.sent;
              _context2.next = 26;
              return apiClient.sendDraft([], [], contractId);

            case 26:
              _this.MiscellaneousModal.current.SetTextAndTitle("Success!", "You should receive your draft at: " + memberEmail);

              _context2.next = 32;
              break;

            case 29:
              _context2.prev = 29;
              _context2.t0 = _context2["catch"](4);

              _this.MiscellaneousModal.current.SetTextAndTitle("Error", "We tried to send the draft, but got an error: " + _context2.t0);

            case 32:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2, null, [[4, 29]]);
    })));

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__["default"])(_this), "sendContract",
    /*#__PURE__*/
    Object(_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__["default"])(
    /*#__PURE__*/
    _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee3() {
      return _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              alert("Not yet enabled. Waiting for OpenLaw to fix their Deal feature, to issue multiple Contracts at once. ");

            case 1:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    })));

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__["default"])(_this), "RequestSignatureFromEtherize",
    /*#__PURE__*/
    Object(_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__["default"])(
    /*#__PURE__*/
    _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee4() {
      var _this$state2, openLawConfig, apiClient, progress, progressMessage, _ref10, _ref11, jwt, err, uploadParams, contractId;

      return _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee4$(_context4) {
        while (1) {
          switch (_context4.prev = _context4.next) {
            case 0:
              _this$state2 = _this.state, openLawConfig = _this$state2.openLawConfig, apiClient = _this$state2.apiClient, progress = _this$state2.progress, progressMessage = _this$state2.progressMessage;
              _context4.prev = 1;
              _context4.next = 4;
              return _API__WEBPACK_IMPORTED_MODULE_19__["default"].getJWT();

            case 4:
              _ref10 = _context4.sent;
              _ref11 = Object(_babel_runtime_corejs2_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__["default"])(_ref10, 2);
              jwt = _ref11[0];
              err = _ref11[1];

              if (!(err !== "" || jwt === "")) {
                _context4.next = 11;
                break;
              }

              alert(err);
              return _context4.abrupt("return");

            case 11:
              apiClient.jwt = jwt; //add Open Law params to be uploaded

              uploadParams = _this.buildOpenLawParamsFromState();
              console.log(uploadParams.parameters);
              _context4.next = 16;
              return apiClient.uploadContract(uploadParams);

            case 16:
              contractId = _context4.sent;
              console.log("Contract ID: ", contractId); // looks like openlaw automatically sends the email to the member, so just send to us here

              _context4.next = 20;
              return apiClient.sendContract([EMAIL], [EMAIL], contractId);

            case 20:
              return _context4.abrupt("return", [true, ""]);

            case 23:
              _context4.prev = 23;
              _context4.t0 = _context4["catch"](1);
              console.log(_context4.t0);
              return _context4.abrupt("return", [false, _context4.t0]);

            case 27:
            case "end":
              return _context4.stop();
          }
        }
      }, _callee4, null, [[1, 23]]);
    })));

    Object(_babel_runtime_corejs2_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_11__["default"])(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__["default"])(_this), "payFiat",
    /*#__PURE__*/
    Object(_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__["default"])(
    /*#__PURE__*/
    _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee5() {
      var _ref13, _ref14, success, err, json, sessionID, stripe, _ref15, error;

      return _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.next = 2;
              return _this.RequestSignatureFromEtherize();

            case 2:
              _ref13 = _context5.sent;
              _ref14 = Object(_babel_runtime_corejs2_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__["default"])(_ref13, 2);
              success = _ref14[0];
              err = _ref14[1];

              if (success) {
                _context5.next = 9;
                break;
              }

              alert("Failure to upload to OpenLaw: " + err);
              return _context5.abrupt("return");

            case 9:
              _context5.next = 11;
              return _API__WEBPACK_IMPORTED_MODULE_19__["default"].getFiatTransaction();

            case 11:
              json = _context5.sent;
              sessionID = json["id"]; // live key:
              // const stripe = window.Stripe(process.env.StripePrivate);
              // test key:

              stripe = window.Stripe("pk_test_5pTSizRz1YOup5x5K8Eq3y2Z007VPv8mkI");
              _context5.next = 16;
              return stripe.redirectToCheckout({
                sessionId: sessionID
              });

            case 16:
              _ref15 = _context5.sent;
              error = _ref15.error;

              if (error != null) {
                alert("Failure to get Stripe Checkout: " + error.message);
              }

            case 19:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5);
    })));

    _this.ChoosePaymentMethodModal = react__WEBPACK_IMPORTED_MODULE_12___default.a.createRef();
    _this.PaymentModal = react__WEBPACK_IMPORTED_MODULE_12___default.a.createRef();
    _this.MiscellaneousModal = react__WEBPACK_IMPORTED_MODULE_12___default.a.createRef();
    _this.togglePaymentMethodModal = _this.togglePaymentMethodModal.bind(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__["default"])(_this));
    _this.payCrypto = _this.payCrypto.bind(Object(_babel_runtime_corejs2_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__["default"])(_this));
    return _this;
  }

  Object(_babel_runtime_corejs2_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_6__["default"])(HeavenlyInterface, [{
    key: "showReview",
    value: function showReview() {
      console.log('Toggle Review');
    }
  }, {
    key: "showDefine",
    value: function showDefine() {
      console.log('Toggle Form/Define');
      this.setState(function (prevState) {
        return {
          formVisible: !prevState.formVisible
        };
      });
    }
  }, {
    key: "showFinalize",
    value: function showFinalize() {
      console.log('Toggle Finalize');
      this.setState(function (prevState) {
        return {
          finalizeVisible: !prevState.finalizeVisible
        };
      });
    }
  }, {
    key: "executeTemplate",
    value: function executeTemplate() {
      var compiledTemplate = this.state.compiledTemplate;

      var _Openlaw$execute = openlaw__WEBPACK_IMPORTED_MODULE_13__["Openlaw"].execute(compiledTemplate.compiledTemplate, {}, this.state.parameters),
          executionResult = _Openlaw$execute.executionResult,
          errorMessage = _Openlaw$execute.errorMessage;

      if (errorMessage !== "") {
        console.log("openlaw execute error: " + errorMessage);
      }

      var validationResult = openlaw__WEBPACK_IMPORTED_MODULE_13__["Openlaw"].validateContract(executionResult);
      var errorArray = openlaw__WEBPACK_IMPORTED_MODULE_13__["Openlaw"].validationErrors(validationResult);
      console.log("errors:");
      console.log(errorArray);
      var missingInput = openlaw__WEBPACK_IMPORTED_MODULE_13__["Openlaw"].hasMissingInputs(validationResult);
      console.log("missing inputs: " + missingInput);
      var variables = openlaw__WEBPACK_IMPORTED_MODULE_13__["Openlaw"].getExecutedVariables(executionResult, {});
      this.setState({
        variables: variables,
        executionResult: executionResult
      });
    }
  }, {
    key: "uploadParamsHasValidEmail",
    value: function uploadParamsHasValidEmail(uploadParams) {
      // try to parse their email in the parameters
      var json = null;

      try {
        json = JSON.parse(uploadParams.parameters["Member Signature"]);
      } catch (e) {
        return [false, ""];
      }

      var memberEmail = json["email"];
      return [true, memberEmail];
    }
  }, {
    key: "buildOpenLawParamsFromState",
    value: function buildOpenLawParamsFromState() {
      var template = this.state.template;
      this.executeTemplate();
      var parameters = this.state.parameters;
      var object = {
        templateId: template.id,
        title: template.title,
        text: template.content,
        creator: "Etherize",
        parameters: parameters,
        overriddenParagraphs: {},
        agreements: {},
        draftId: ""
      };
      return object;
    } // TODO: check to make sure they've filled out the email field

  }, {
    key: "togglePaymentMethodModal",
    // TODO: check that ALL fields are filled or we'll get a 400 error from openlaw
    value: function togglePaymentMethodModal() {
      // Check for a valid email first
      var uploadParams = this.buildOpenLawParamsFromState();

      var _this$uploadParamsHas3 = this.uploadParamsHasValidEmail(uploadParams),
          _this$uploadParamsHas4 = Object(_babel_runtime_corejs2_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__["default"])(_this$uploadParamsHas3, 2),
          validEmail = _this$uploadParamsHas4[0],
          memberEmail = _this$uploadParamsHas4[1];

      if (!validEmail) {
        this.MiscellaneousModal.current.SetTextAndTitle("Error", "We couldn't parse your email address! Please enter a valid email address.");
        this.MiscellaneousModal.current.ToggleShowing();
        return;
      }

      this.ChoosePaymentMethodModal.current.SetTextAndTitle("Choose a Payment Method", "");
      this.ChoosePaymentMethodModal.current.ToggleShowing();
    }
  }, {
    key: "payCrypto",
    value: function () {
      var _payCrypto = Object(_babel_runtime_corejs2_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_4__["default"])(
      /*#__PURE__*/
      _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.mark(function _callee6(cryptoCurrency) {
        var _ref16, _ref17, success, err, json, result, address, statusUrl, explanation, followingExplanation;

        return _babel_runtime_corejs2_regenerator__WEBPACK_IMPORTED_MODULE_2___default.a.wrap(function _callee6$(_context6) {
          while (1) {
            switch (_context6.prev = _context6.next) {
              case 0:
                _context6.next = 2;
                return this.RequestSignatureFromEtherize();

              case 2:
                _ref16 = _context6.sent;
                _ref17 = Object(_babel_runtime_corejs2_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__["default"])(_ref16, 2);
                success = _ref17[0];
                err = _ref17[1];

                if (success) {
                  _context6.next = 9;
                  break;
                }

                alert("Failure to upload to OpenLaw: " + err);
                return _context6.abrupt("return");

              case 9:
                this.ChoosePaymentMethodModal.current.ToggleShowing();
                this.PaymentModal.current.ToggleShowing();
                this.PaymentModal.current.ToggleLoading(true);
                _context6.next = 14;
                return _API__WEBPACK_IMPORTED_MODULE_19__["default"].getCryptoTransaction(cryptoCurrency);

              case 14:
                json = _context6.sent;

                if (!(json["error"] !== "ok")) {
                  _context6.next = 18;
                  break;
                }

                this.PaymentModal.current.SetTextAndTitle("Error", json["error"]);
                return _context6.abrupt("return");

              case 18:
                result = json["result"];
                address = result["Address"];
                statusUrl = result["status_url"];
                explanation = "Please send your " + cryptoCurrency + " to the following address: <br/> <br/>" + address + "<br/> <br/> ";
                followingExplanation = "Monitor the status of your payment <a href=" + statusUrl + "> here </a> ";
                this.PaymentModal.current.SetTextAndTitle("Transaction Created!", explanation + followingExplanation);

              case 24:
              case "end":
                return _context6.stop();
            }
          }
        }, _callee6, this);
      }));

      function payCrypto(_x) {
        return _payCrypto.apply(this, arguments);
      }

      return payCrypto;
    }()
  }, {
    key: "templatePage",
    value: function templatePage() {
      var _this2 = this;

      return __jsx(react__WEBPACK_IMPORTED_MODULE_12___default.a.Fragment, null, __jsx(_Modal__WEBPACK_IMPORTED_MODULE_20__["default"], {
        ref: this.MiscellaneousModal
      }), __jsx(_Modal__WEBPACK_IMPORTED_MODULE_20__["default"], {
        ref: this.PaymentModal
      }), __jsx(_Modal__WEBPACK_IMPORTED_MODULE_20__["default"], {
        ref: this.ChoosePaymentMethodModal
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBRow"], {
        center: true
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCol"], {
        lg: "8",
        className: "mb-4"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCard"], {
        border: "0"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBBtn"], {
        size: "lg",
        onClick: this.payFiat,
        className: "btn-secondary"
      }, "Pay ", COST, " in USD"), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBBtn"], {
        size: "lg",
        onClick: function onClick() {
          return _this2.payCrypto("LTCT");
        },
        className: "btn-secondary"
      }, "Pay ", COST, " in BTC (LTCT)"), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBBtn"], {
        size: "lg",
        onClick: function onClick() {
          return _this2.payCrypto("ETH");
        },
        className: "btn-secondary"
      }, "Pay ", COST, " in ETH"))))), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBContainer"], null, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBRow"], {
        className: "py-5 mt-5 "
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCol"], {
        md: "12"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBAnimation"], {
        type: "fadeInUp"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCard"], {
        cascade: true
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCardHeader"], {
        className: "view view-cascade gradient-card-header standard-card-header-gradient d-flex justify-content-between align-items-center py-2 mx-4 mb-3"
      }, __jsx("div", null), __jsx("p", {
        className: "card-title h1"
      }, "Define"), __jsx("div", null)), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCardBody"], {
        className: "text-center"
      }, __jsx(openlaw_elements__WEBPACK_IMPORTED_MODULE_14__["default"], {
        style: {
          width: '50%'
        },
        apiClient: this.state.apiClient,
        executionResult: this.state.executionResult,
        parameters: this.state.parameters,
        onChangeFunction: this.onChange,
        openLaw: openlaw__WEBPACK_IMPORTED_MODULE_13__["Openlaw"],
        variables: this.state.variables
      })))))), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBRow"], {
        className: "mt-5 mb-5"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCol"], {
        className: "text-center",
        md: "12"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBAnimation"], {
        type: "fadeInUp"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCard"], null, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCardHeader"], {
        className: "view view-cascade gradient-card-header standard-card-header-gradient d-flex justify-content-between align-items-center py-2 mx-4 mb-3"
      }, __jsx("div", null), __jsx("p", {
        className: "card-title h1"
      }, "Finalize"), __jsx("div", null)), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBRow"], {
        className: "mt-2"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCol"], {
        lg: "6",
        className: "mb-3"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBAnimation"], {
        reveal: true,
        type: "fadeInUp"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCard"], {
        cascade: true
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCardHeader"], {
        className: "view view-cascade gradient-card-header standard-card-header-gradient d-flex justify-content-between align-items-center py-2 mx-4 mb-3"
      }, __jsx("div", null), __jsx("p", {
        className: "card-title h4"
      }, "Email Draft"), __jsx("div", null)), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCardBody"], {
        cascade: true
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCardText"], null, "You can forward the Draft to your lawyer or your co-founders. ", __jsx("br", null), " ", __jsx("br", null), "You can convert the Draft into a Contract when you are ready to Form Entity."), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBBtn"], {
        size: "lg",
        className: "btn-secondary",
        onClick: this.sendDraft
      }, "Save"))))), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCol"], {
        lg: "6",
        className: "mb-3"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBAnimation"], {
        reveal: true,
        type: "fadeInUp"
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCard"], {
        cascade: true
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCardHeader"], {
        className: "view view-cascade gradient-card-header standard-card-header-gradient d-flex justify-content-between align-items-center py-2 mx-4 mb-3"
      }, __jsx("div", null), __jsx("p", {
        className: "card-title h4"
      }, "Purchase"), __jsx("div", null)), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCardBody"], {
        cascade: true
      }, __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBCardText"], null, "Buy now, pay in fiat or crypto."), __jsx(mdbreact__WEBPACK_IMPORTED_MODULE_15__["MDBBtn"], {
        size: "lg",
        onClick: this.togglePaymentMethodModal,
        className: "btn-secondary"
      }, "Create"))))))))))), __jsx(_Footer__WEBPACK_IMPORTED_MODULE_22__["default"], null));
    }
  }, {
    key: "render",
    value: function render() {
      var _this$state3 = this.state,
          apiClient = _this$state3.apiClient,
          variables = _this$state3.variables,
          parameters = _this$state3.parameters,
          executionResult = _this$state3.executionResult,
          previewHTML = _this$state3.previewHTML,
          loading = _this$state3.loading,
          success = _this$state3.success,
          ipfsLoading = _this$state3.ipfsLoading,
          progress = _this$state3.progress,
          progressMessage = _this$state3.progressMessage;
      return __jsx(react__WEBPACK_IMPORTED_MODULE_12___default.a.Fragment, null, !this.state.executionResult ? __jsx("div", {
        className: "portalBackground"
      }, __jsx(_BannerHeader__WEBPACK_IMPORTED_MODULE_18__["default"], null), __jsx(_LoadingPortal__WEBPACK_IMPORTED_MODULE_21__["default"], null)) : __jsx("div", {
        className: "mainBackground"
      }, __jsx(_BannerHeader__WEBPACK_IMPORTED_MODULE_18__["default"], null), this.templatePage()));
    }
  }]);

  return HeavenlyInterface;
}(react__WEBPACK_IMPORTED_MODULE_12___default.a.Component);



/***/ })

})
//# sourceMappingURL=create.js.825d6e0e8e07c8c5d372.hot-update.js.map